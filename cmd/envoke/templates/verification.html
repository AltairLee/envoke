{{define "head"}}
  <title>{{ .Title}}</title>
{{end}}

{{define "body"}}
<div id="verify">
    <form id="verify-form">
        <h2>Verify Signature</h2>
        <input type="text" name="signature_id" placeholder="signature ID" required /><br>
        <input type="submit" value="verify" />
    </form>
</div>
<pre id="message"></pre>
<script type="text/javascript">

function httpPostAsync(addr, data, callback) {
    var xhr = new XMLHttpRequest ();
    xhr.onreadystatechange = function() {
      if (xhr.readyState == 4) {
        if (xhr.status == 200) {
          callback(xhr.responseText);
        } else {
          alert(xhr.responseText);
        };
      };
    };
    xhr.open("POST", addr, true); 
    xhr.send(data);
};

var verifyCallback = function(responseText) {
  var json = JSON.parse(responseText);
  var str = JSON.stringify(json,null,2);
  $("#message").text(str);
};

window.onload = function() {
  // Verify 
  var verifyForm = document.getElementById("verify-form");
  verifyForm.onsubmit = function(event) {
    event.preventDefault();
    var formData = $("#verify-form").serialize();
    console.log(formData);
    httpPostAsync("http://localhost:8888/verify", formData, verifyCallback);
  };
}
</script>
{{end}}